<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v5.16.4"><!-- Canonical URL --><link rel="canonical" href="https://vikassharma.me/usage-of-cache-control-headers/"><!-- Primary Meta Tags --><title>Usage of cache-control headers and their values | &lt;/&gt; Vikas Sharma</title><meta name="title" content="Usage of cache-control headers and their values"><meta name="description" content="Cache-Control Headers and Their Usage The Cache-Control HTTP header is crucial for managing caching mechanisms for both browsers and Content Delivery Networks (..."><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://vikassharma.me/usage-of-cache-control-headers/"><meta property="og:title" content="Usage of cache-control headers and their values"><meta property="og:description" content="Cache-Control Headers and Their Usage The Cache-Control HTTP header is crucial for managing caching mechanisms for both browsers and Content Delivery Networks (..."><meta property="og:image" content="https://vikassharma.me/opengraph.jpg"><meta property="article:published_time" content="2025-01-14T14:19:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://vikassharma.me/usage-of-cache-control-headers/"><meta property="twitter:title" content="Usage of cache-control headers and their values"><meta property="twitter:description" content="Cache-Control Headers and Their Usage The Cache-Control HTTP header is crucial for managing caching mechanisms for both browsers and Content Delivery Networks (..."><meta property="twitter:image" content="https://vikassharma.me/opengraph.jpg"><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="</> Vikas Sharma" href="https://vikassharma.me/rss.xml"><!-- Sitemap --><link rel="sitemap" href="/sitemap-index.xml"><!-- Google Tag Manager --><script>(function(){const GTM_ID = "GTM-WC7F9C2X";

  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',GTM_ID);
})();</script><!-- End Google Tag Manager --><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-X8FQN553XQ"></script><script>(function(){const GA_ID = "G-X8FQN553XQ";

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', GA_ID);
})();</script><style>:root{--width: 800px;--font-main: Verdana, sans-serif;--font-secondary: Verdana, sans-serif;--font-scale: 1em;--background-color: #fff;--heading-color: #222;--text-color: #444;--link-color: #3273dc;--visited-color: #8b6fcb;--code-background-color: #f2f2f2;--code-color: #222;--blockquote-color: #222}@media(prefers-color-scheme:dark){:root{--background-color: #01242e;--heading-color: #eee;--text-color: #ddd;--link-color: #8cc2dd;--visited-color: #8b6fcb}}body.dark-mode{--background-color: #01242e;--heading-color: #eee;--text-color: #ddd;--link-color: #8cc2dd;--visited-color: #8b6fcb;--code-background-color: #0d1117;--code-color: #ddd;--blockquote-color: #ccc}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}pre{padding:20px}*:not(pre)>code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}time{font-family:monospace;font-style:normal;font-size:15px}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}.tags{font-size:.83rem}.tag{margin-right:.25rem}.filter-title{margin-bottom:0}.remove-filter{font-size:.83rem}form{line-height:1}.item-index ul{list-style:none;padding:0;display:flex;flex-wrap:wrap;gap:.5rem}.item-index a{display:inline-block;padding:.25rem .75rem;border:1px solid var(--dim);border-radius:4px;text-decoration:none}ul.item-groups,.item-groups ul{list-style:none;padding:0;margin:0}.item-groups li{display:flex;align-items:baseline;gap:1ch;border-bottom:1px solid var(--dim)}.item-groups li:last-child{border-bottom:none}.item-groups li a{text-decoration:none}.item-groups time{color:var(--dim);font-size:.9rem;flex-shrink:0}.item-groups .title{text-decoration:underline}.preview-container{display:flex;flex-direction:column;gap:1rem;height:85vh}.pane{display:flex}.pane:first-of-type{height:40%}.pane:last-of-type{height:60%;overflow-y:auto;border:1px solid var(--dim);background:#fff}#markdown-input{width:100%;flex-grow:1;border:1px solid var(--dim);padding:1rem;font-family:monospace;font-size:16px;resize:vertical;background:#00000005}#preview-wrapper{width:100%}#preview-wrapper h1:first-child{margin-top:0}.social-links{margin-top:2rem;display:flex;gap:1rem}.social-links a{text-decoration:none;padding:.5rem 1rem;border:1px solid #ccc;border-radius:5px}.social-links a:hover{background-color:#eee}.footer[data-astro-cid-sz7xmlte]{padding:2rem 0;text-align:center}main[data-astro-cid-ivdev4kk]{flex-grow:1}body{display:flex;flex-direction:column;min-height:100vh}
.category-links[data-astro-cid-33jieqlm]{margin-top:1rem;margin-bottom:1rem;font-size:.9rem;color:var(--dim)}.category-links[data-astro-cid-33jieqlm] a[data-astro-cid-33jieqlm]{text-decoration:underline;text-decoration-style:dotted}
</style></head> <body data-astro-cid-yxt6t7ye> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WC7F9C2X" height="0" width="0" style="display:none;visibility:hidden" data-astro-cid-yxt6t7ye></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <header> <a class="title" href="/"> <h1>&lt;/&gt; Vikas Sharma</h1> </a> <nav> <p> <a href="/">Home</a> <a href="/blog">Blog</a> <a href="/about">About</a> <a href="/rss.xml">RSS</a> </p> </nav> </header> <main data-astro-cid-ivdev4kk>    <article>  <h1>Usage of cache-control headers and their values</h1> <time datetime="2025-01-14T14:19:00.000Z">14 Jan, 2025</time> <div class="category-links" data-astro-cid-33jieqlm>
categories:
<a href="/categories#sticky-notes" data-astro-cid-33jieqlm>sticky-notes</a>, <a href="/categories#requests-sticky-notes" data-astro-cid-33jieqlm>requests-sticky-notes</a></div> <hr>  <h1 id="cache-control-headers-and-their-usage">Cache-Control Headers and Their Usage</h1>
<p>The <code>Cache-Control</code> HTTP header is crucial for managing caching mechanisms for both browsers and Content Delivery Networks (CDNs). It specifies how and for how long a resource should be cached.</p>
<hr>
<h2 id="common-directives-and-their-meanings">Common Directives and Their Meanings</h2>
<ol>
<li>
<p><strong><code>max-age</code></strong>: Specifies the maximum time (in seconds) a resource is considered fresh.</p>
<ul>
<li>Example: <code>Cache-Control: max-age=3600</code> (cache for 1 hour).</li>
</ul>
</li>
<li>
<p><strong><code>s-maxage</code></strong>: Similar to <code>max-age</code>, but applies only to shared caches (e.g., CDNs or reverse proxies).</p>
<ul>
<li>Overrides <code>max-age</code> for shared caches if both are present.</li>
<li>Example: <code>Cache-Control: max-age=3600, s-maxage=7200</code> (1 hour for browsers, 2 hours for shared caches).</li>
</ul>
</li>
<li>
<p><strong>Other common directives</strong>:</p>
<ul>
<li><code>no-cache</code>: Forces caches to revalidate the resource with the origin server before serving.</li>
<li><code>no-store</code>: Prevents caching entirely.</li>
<li><code>public</code>: Indicates the resource can be cached by any cache.</li>
<li><code>private</code>: Restricts caching to the browser only.</li>
<li><code>must-revalidate</code>: Requires caches to revalidate the resource when it becomes stale.</li>
</ul>
</li>
</ol>
<hr>
<h2 id="browser-ttl-vs-cdn-ttl">Browser TTL vs. CDN TTL</h2>
<ol>
<li>
<p><strong>Browser TTL</strong>:</p>
<ul>
<li>Controlled by <code>max-age</code>.</li>
<li>Specifies how long the browser should cache a resource locally.</li>
<li>Example: <code>Cache-Control: max-age=3600</code> (the browser caches the resource for 1 hour).</li>
</ul>
</li>
<li>
<p><strong>CDN TTL</strong>:</p>
<ul>
<li>Controlled by <code>s-maxage</code>.</li>
<li>Defines how long a CDN or shared cache should hold the resource.</li>
<li>Overrides <code>max-age</code> for shared caches.</li>
<li>Example: <code>Cache-Control: max-age=3600, s-maxage=7200</code> (CDN caches for 2 hours, browser caches for 1 hour).</li>
</ul>
</li>
</ol>
<hr>
<h2 id="setting-browser-cache-to-10-seconds-and-cdn-cache-to-60-seconds">Setting Browser Cache to 10 Seconds and CDN Cache to 60 Seconds</h2>
<p>To set different caching times for the browser and CDN:</p>
<ul>
<li>Use <code>max-age=10</code> for the browser.</li>
<li>Use <code>s-maxage=60</code> for the CDN.</li>
</ul>
<h3 id="example-header">Example Header:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="http"><code><span class="line"><span style="color:#85E89D">Cache-Control</span><span style="color:#F97583">:</span><span style="color:#9ECBFF"> max-age=10, s-maxage=60</span></span></code></pre>
<ul>
<li>The browser will cache the resource for 10 seconds.</li>
<li>The CDN will cache the resource for 60 seconds before revalidating with the origin server.</li>
</ul>
<h2 id="key-differences-between-browser-and-cdn-caching">Key Differences Between Browser and CDN Caching</h2>
<ul>
<li>Scope: <code>max-age</code> applies to browsers and shared caches unless overridden by <code>s-maxage</code>. <code>s-maxage</code> is exclusive to shared caches.</li>
<li>Hierarchy: Shared caches (like CDNs) prioritize <code>s-maxage</code> over <code>max-age</code>.</li>
<li>Purpose: Browser TTL ensures user-specific caching; CDN TTL optimizes resource delivery across a network.</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li>Use <code>s-maxage</code> for precise control over CDN caching and <code>max-age</code> for browser caching.</li>
<li>For frequently updated resources, consider <code>must-revalidate</code> or <code>no-cache</code>.</li>
<li>Combine <code>Cache-Control</code> with <code>ETag</code> or <code>Last-Modified</code> for conditional requests.</li>
</ol>
<h2 id="additional-considerations-for-effective-caching">Additional Considerations for Effective Caching</h2>
<ol>
<li>
<p><strong>Cache Invalidation</strong>:<br>
Ensure you have a strategy to invalidate cached resources when the content changes. This can be done by:</p>
<ul>
<li>Versioning URLs (e.g., appending <code>?v=1.2</code>).</li>
<li>Using <code>ETag</code> and <code>Last-Modified</code> headers to help caches determine freshness.</li>
</ul>
</li>
<li>
<p><strong>Mixing Private and Public Resources</strong>:<br>
Use <code>private</code> for user-specific content (e.g., account details) and <code>public</code> for shared content (e.g., images, scripts).</p>
</li>
<li>
<p><strong>Avoid Over-Caching Critical Resources</strong>:<br>
Resources that change frequently (e.g., APIs or dynamic content) should have shorter TTLs or use <code>no-cache</code> to avoid stale data.</p>
</li>
<li>
<p><strong>Testing and Debugging</strong>:</p>
<ul>
<li>Use browser developer tools to inspect cache behavior.</li>
<li>Verify CDN configurations to ensure <code>s-maxage</code> is being respected.</li>
</ul>
</li>
<li>
<p><strong>Optimize TTL Settings</strong>:<br>
Balance between cache freshness and resource delivery speed. For example:</p>
<ul>
<li>Use longer TTLs for static assets like images, stylesheets, and JavaScript files.</li>
<li>Use shorter TTLs for dynamic or frequently changing content.</li>
</ul>
</li>
</ol>
<hr>
<h2 id="when-to-use-specific-cache-control-settings">When to Use Specific Cache-Control Settings</h2>



































<table><thead><tr><th>Use Case</th><th>Cache-Control Example</th><th>Notes</th></tr></thead><tbody><tr><td>Static assets</td><td><code>Cache-Control: max-age=31536000, immutable</code></td><td>Long TTL with <code>immutable</code> ensures assets don’t change unexpectedly.</td></tr><tr><td>APIs with dynamic responses</td><td><code>Cache-Control: no-cache, must-revalidate</code></td><td>Ensures responses are always validated before use.</td></tr><tr><td>Short browser, long CDN caching</td><td><code>Cache-Control: max-age=10, s-maxage=60</code></td><td>Helps balance frequent updates with CDN efficiency.</td></tr><tr><td>Prevent all caching</td><td><code>Cache-Control: no-store</code></td><td>Suitable for sensitive or non-cacheable data.</td></tr><tr><td>Mixed private/public content</td><td><code>Cache-Control: private, max-age=60</code></td><td>Restricts caching to the user’s browser only.</td></tr></tbody></table>
<p>By tailoring your caching strategy using <code>Cache-Control</code> headers, you can optimize both performance and freshness for your users and shared caches.</p>  </article>    </main>  <footer class="footer" data-astro-cid-sz7xmlte> <div class="container" data-astro-cid-sz7xmlte> <p data-astro-cid-sz7xmlte>&copy; 2026 Vikas Sharma. All rights reserved.</p> </div> </footer>  </body> </html>